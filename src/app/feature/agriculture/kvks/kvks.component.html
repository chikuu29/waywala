<div class="coustom-margin"></div>
<div class="container mt-4">

    <h1 class="text-center header-text"><i class="fa-solid fa-location-dot fa-fade text-danger me-2"></i> <span>Address of Krishi Vigyan Kendra's</span> </h1>
    <p class="text-center fs-5">କୃଷ୍ଣ ବିଦ୍ୟା କେନ୍ଦ୍ରର ଠିକଣା</p>
    <p class="text-center fs-5">कृषि विज्ञान केंद्र का पता</p>

    <div class="">
        <form class="d-flex flex-column justify-content-center" [formGroup]="kvkdetailsForm">
            <div class="m-1">
                <p-dropdown [options]="countries" optionLabel="name" [filter]="false" filterBy="name"
                    [showClear]="false" placeholder="Country" formControlName="country" [style]="{'width':'100%'}">
                    <ng-template pTemplate="selectedItem">
                        <div class="country-item country-item-value">
                            <div>{{kvkdetailsForm.value.country?.name}}</div>
                        </div>
                    </ng-template>
                    <ng-template let-country pTemplate="item">
                        <div class="country-item">
                            <div>{{country.name}}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
            </div>
            <div class="m-1">

                <p-dropdown (ngModelChange)="autoselectdistrict(kvkdetailsForm.value.state?.name)" [style]="{'width':'100%'}" [options]="state" optionLabel="name" [filter]="true" filterBy="name" [showClear]="false"
                    placeholder="State" formControlName="state">
                    <ng-template pTemplate="selectedItem">
                        <div class="country-item country-item-value">
                            <div>{{kvkdetailsForm.value.state?.name}}</div>
                        </div>
                    </ng-template>
                    <ng-template let-state pTemplate="item">
                        <div class="country-item">
                            <div>{{state.name}}</div>
                        </div>
                    </ng-template>
                </p-dropdown>

            </div>
            <div class="m-1">

                <p-dropdown [style]="{'width':'100%'}" [options]="district" optionLabel="name" [filter]="true" filterBy="name" [showClear]="false"
                    placeholder="District" formControlName="district">
                    <ng-template pTemplate="selectedItem">
                        <div class="country-item country-item-value">
                            <div>{{kvkdetailsForm.value.district?.name}}</div>
                        </div>
                    </ng-template>
                    <ng-template let-district pTemplate="item">
                        <div class="country-item">
                            <div>{{district.name}}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
            </div>
            <div class="m-2">
                <p-button icon="pi pi-search" [loading]="serchloading" (onClick)="search()"
                    [disabled]="!kvkdetailsForm.valid"></p-button>

            </div>
        </form>
    </div>
</div>
<div class="container">
    <ng-container *ngIf="totalKvksDetails.length>0">
        <p-table #dt [value]="totalKvksDetails" [rows]="10" [paginator]="false" responsiveLayout="scroll"
            scrollHeight="500px" [globalFilterFields]="['kvks_name','district']" [rowHover]="true" dataKey="id"
            currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
            [showCurrentPageReport]="true" style="border-radius:14px">
            <ng-template pTemplate="caption">
                <div class="d-flex align-items-center  flex-wrap"  [ngClass]="screenWidth>400?'justify-content-between':'justify-content-center'">
                    
                    
                        <div class="text-center">
                            <h3 class="m-0">Manage Kvks Details</h3>
                            <h5 class="text-danger">In total there are {{totalKvksDetails ? totalKvksDetails.length : 0 }} KVKS Information</h5>
                        </div>
                    
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" (input)="dt.filterGlobal($any($event.target).value, 'contains')"
                            placeholder="Search..." />
                    </span>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th pSortableColumn="state">State <p-sortIcon field="state">
                        </p-sortIcon>
                    </th>
                    <th pSortableColumn="distinct">District <p-sortIcon field="distinct">
                        </p-sortIcon>
                    </th>
                    <th pSortableColumn="kvks_name">KVK Name <p-sortIcon field="kvks_name"></p-sortIcon>
                    </th>
                    <th style="min-width:10rem">Contact Details
                    </th>
                    <th style="min-width:10rem">Landline Number
                    </th>
                    <th style="min-width:10rem">Fax No.</th>
                    <th pSortableColumn="pincode" style="min-width:10rem">Pincode <p-sortIcon
                            field="pincode"></p-sortIcon>
                    </th>
                    <th pSortableColumn="atari_address">ATARI Address <p-sortIcon field="atari_address"></p-sortIcon>
                    </th>
                    <th pSortableColumn="host_institute_address">Host Institute Address <p-sortIcon
                            field="host_institute_address"></p-sortIcon>
                    </th>

                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-kvk>
                <tr>
                    <td>{{kvk.state}}</td>
                    <td>{{kvk.district}}</td>
                    <td>{{kvk.kvks_name}}</td>
                    <td>{{kvk.contact_details}}</td>
                    <td>{{kvk.landline_no}}</td>
                    <td>{{kvk.fax_no}}</td>
                    <td>{{kvk.pincode}}</td>
                    <td>{{kvk.atari_address}}</td>
                    <td>{{kvk.host_institute_address}}</td>

                </tr>
            </ng-template>
            
        </p-table>
    </ng-container>
    <ng-container *ngIf="totalKvksDetails.length==0">
        <app-no-data-available></app-no-data-available>
    </ng-container>

</div>